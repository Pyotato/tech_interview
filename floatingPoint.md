# ë¶€ë™ì†Œìˆ˜ì  ê³„ì‚° ì˜¤ë¥˜

## WHAT?

> ì»´í“¨í„°ê°€ ìˆ«ì(ì´ì§„ë²• : 0 ê³¼ 1)ë¥¼ í‘œí˜„í•˜ëŠ” ë°©ì‹ê³¼ ìš°ë¦¬ê°€ ìˆ«ìë¡œ í‘œí˜„í•˜ëŠ” ë°©ì‹(10ì§„ë²•)ì´ ë‹¤ë¥´ë‹¤. ë”°ë¼ì„œ ì†Œìˆ˜ì ì„ í‘œí˜„í•  ë•Œë„ ì•„ë˜ì™€ ê°™ì€ ë¬¸ì œë“¤ì„ ë§ì´ í•  ë•Œê°€ ìˆë‹¤.

```js
let x = 0.1;
let y = 0.2;
console.log(x + y === 0.3); // false
console.log(new BigNumber(x + y)); // 0.30000000000000004
```

## WHY?

> ë‚´ë¶€ì ìœ¼ë¡œ `64ë¹„íŠ¸ í˜•ì‹(IEEE-754)`ë¡œ ìˆ«ìë¥¼ í‘œí˜„í•˜ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸(52ë¹„íŠ¸ì˜ ì •ìˆ˜ë¶€+11ë¹„íŠ¸ì˜ ì†Œìˆ˜ì  ìœ„ì¹˜+1ê°œì˜ ì–‘ìŒìˆ˜ í‘œí˜„ ë¶€í˜¸)í•œë‹¤.
>
> - 2ë¥¼ ì´ì§„ìˆ˜ë¡œ í‘œí˜„í•˜ë©´ 10<sub>(2)</sub>ìœ¼ë¡œ í‘œí˜„ì´ ê°€ëŠ¥í•˜ì§€ë§Œ, 0.2ë¥¼ í‘œí˜„í•˜ê¸° ìœ„í•´ì„œëŠ” ì•„ë˜ì™€ ê°™ì´ ë¬´í•œ ì†Œìˆ˜ë¡œ í‘œí˜„ì´ ë˜ì–´ ì˜¤ì°¨ê°€ ë°œìƒí•œë‹¤.

```
    0  .  0   0     1  1
   (+) .                                            => 0.
          -
          0.2*2 = 0.4 ì˜ ì •ìˆ˜ ë¶€ë¶„ì€ 0              => 0
              -
              0.4*2 = 0.8 ì˜ ì •ìˆ˜ ë¶€ë¶„ì€ 0          => 0
                    -
                    0.8*2 = 1.6ì˜ ì •ìˆ˜ ë¶€ë¶„ì€ 1     => 1
                        -
                        0.6*2 = 1.2ì˜ ì •ìˆ˜ë¶€ë¶„ì€ 1  => 1

(ë°˜ë³µì´ë¯€ë¡œ ìƒëµ)

```

ë”°ë¼ì„œ `64ë¹„íŠ¸ í˜•ì‹(IEEE-754)`ë¡œë§Œ ìˆ«ìë¥¼ í‘œí˜„í•˜ë ¤ëŠ” ê²½ìš° ì˜¤ì°¨ë¡œ ì¸í•œ ê³„ì‚° ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.

## [Solution](https://github.com/Pyotato/tech_interview/blob/JS/samples/floatingPoint.js)

> ì •ìˆ˜ë¶€ë¡œë§Œ ì´ë£¨ì–´ì ¸ ìˆë‹¤ê³  ìƒê°í•˜ê³  ê³„ì‚°ì„ í•œ ë’¤ ì†Œìˆ˜ì ì„ ì…í˜€ì£¼ê¸°

- `toFixed()` ì‚¬ìš©

  ```js
  console.log((x + y).toFixed(1)); // '0.3'
  ```

  - ì´ ë°©ë²•ì„ ì‚¬ìš©í•˜ë©´ ì¸ìë¡œ ì†Œìˆ˜ì  ëª‡ ìë¦¬ë¡œ í‘œí˜„í•  ì§€ë¥¼ String íƒ€ì…ìœ¼ë¡œ ë°˜í™˜í•´ì¤€ë‹¤.

- `Math ë§¤ì„œë“œ` ì‚¬ìš©

  ```js
  console.log(Math.round((x + y) * 10) / 10); // 0.3
  ```

  - `Math.floor`, `Math.ceil`, `Math.trunc`,` Math.round` ë“±ì˜ ë§¤ì„œë“œë“¤ì„ í™œìš©í•  ìˆ˜ ìˆë‹¤.

- `ë¼ì´ë¸ŒëŸ¬ë¦¬` ì‚¬ìš©
  - Big.js(ë” ì‘ê³  ê°„ë‹¨í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ í•„ìš”í•  ê²½ìš°), [BigNumber.js](https://github.com/MikeMcl/bignumber.js), Decimal.js(ì •ìˆ˜ê°€ ì•„ë‹Œ ì§€ìˆ˜ ì§€ì›í•´ì¤Œ, ë§¤ìš° í° ë‹¨ìœ„ì˜ ìˆ˜ë¥¼ ë‹¤ë£° ë•Œ ì‚¬ìš©í•˜ê¸° ì¢‹ìŒ) math.js ë“±ì´ ìˆë‹¤.
  - ê·¸ì¤‘ ì•„ë˜ëŠ” [BigNumber.jsë¥¼ í™œìš©í•´ë³¸ ì˜ˆ](https://github.com/Pyotato/tech_interview/blob/JS/samples/floatingPoint.js#L17C1-L17C61)ë‹¤.
    ```js
    console.log(new BigNumber(x).plus(new BigNumber(y))); // 0.3
    ```

## References

- [ğŸ’» ìë°”ìŠ¤í¬ë¦½íŠ¸ ë¶€ë™ì†Œìˆ˜ì  ê³„ì‚° ë¬¸ì œ](https://github.com/ssi02014/Front-Interview/blob/master/documents/JavaScript/floating-point.md)
- [bignumber.js readme](https://github.com/MikeMcl/bignumber.js)
