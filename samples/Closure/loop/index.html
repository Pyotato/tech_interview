<!DOCTYPE html>
<style type="style">
  body {
    font-family: Helvetica, Arial, sans-serif;
    font-size: 12px;
  }

  h1 {
    font-size: 1.5em;
  }

  h2 {
    font-size: 1.2em;
  }
</style>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>loop example</title>
    
  <body>
    <p id="help">Helpful notes will appear here</p>
<p>Email: <input type="text" id="email" name="email" /></p>
<p>Name: <input type="text" id="name" name="name" /></p>
<p>Age: <input type="text" id="age" name="age" /></p>
  </body>
</html>

<script>
function showHelp(help) {
  document.getElementById("help").textContent = help;
}
function setupHelp() {
  var helpText = [
    { id: "email", help: "Your email address" },
    { id: "name", help: "Your full name" },
    { id: "age", help: "Your age (you must be over 16)" },
  ];
  
  /** not intended outcome!
   * 하나의 렉시컬환경을 공유!
  for (var i = 0; i < helpText.length; i++) {
      // Culprit is the use of `var` on this line
      var item = helpText[i];
      document.getElementById(item.id).onfocus = function () {
          showHelp(item.help);
        };
      }
  */

  /**
   * function factory
  function makeHelpCallback(help) {
    return function () {
      showHelp(help);
    };
  }
   
  for (var i = 0; i < helpText.length; i++) {
    var item = helpText[i];
    document.getElementById(item.id).onfocus = makeHelpCallback(item.help);
  }
  */

  /**
   * let과 const 키워드로 접근하기
   * for (let i = 0; i < helpText.length; i++) {
    const item = helpText[i];
    document.getElementById(item.id).onfocus = () => {
      showHelp(item.help);
    };
  }
   * 
  */

  /**
   * forEach로 배열 순회하면서 이벤트 리스너를 각 인풋에 붙이기
   */
   forEach(function (text) {
    document.getElementById(text.id).onfocus = function () {
      showHelp(text.help);
    };
  });

}

setupHelp();
</script>
